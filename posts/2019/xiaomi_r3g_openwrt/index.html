<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>小米路由器3G折腾之刷OpenWrt记录 | STARRY-S' Blog</title>
<meta name=keywords content="教程,路由器,OpenWrt"><meta name=description content="生命不息, 折腾不止&mldr;"><meta name=author content="STARRY-S"><link rel=canonical href=https://blog.starry-s.moe/posts/2019/xiaomi_r3g_openwrt/><link crossorigin=anonymous href=/assets/css/stylesheet.b00f06743954711b22a4a15ad0b966b18e6a0f7e39cea412e471d345bc6b85ca.css integrity="sha256-sA8GdDlUcRsipKFa0LlmsY5qD345zqQS5HHTRbxrhco=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.starry-s.moe/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://blog.starry-s.moe/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.starry-s.moe/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.starry-s.moe/apple-touch-icon.png><link rel=mask-icon href=https://blog.starry-s.moe/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://blog.starry-s.moe/posts/2019/xiaomi_r3g_openwrt/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/aplayer/dist/APlayer.min.css><script src=https://fastly.jsdelivr.net/npm/aplayer/dist/APlayer.min.js></script><script src=https://fastly.jsdelivr.net/npm/meting/dist/Meting.min.js></script><script>var meting_api="https://api.injahow.cn/meting/?server=:server&type=:type&id=:id&auth=:auth&r=:r"</script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#232323"><meta property="og:url" content="https://blog.starry-s.moe/posts/2019/xiaomi_r3g_openwrt/"><meta property="og:site_name" content="STARRY-S' Blog"><meta property="og:title" content="小米路由器3G折腾之刷OpenWrt记录"><meta property="og:description" content="生命不息, 折腾不止…"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-02-19T00:49:20+08:00"><meta property="article:modified_time" content="2021-01-23T12:36:44+08:00"><meta property="article:tag" content="教程"><meta property="article:tag" content="路由器"><meta property="article:tag" content="OpenWrt"><meta property="og:image" content="https://blog.starry-s.moe/avatar.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.starry-s.moe/avatar.png"><meta name=twitter:title content="小米路由器3G折腾之刷OpenWrt记录"><meta name=twitter:description content="生命不息, 折腾不止&mldr;"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.starry-s.moe/posts/"},{"@type":"ListItem","position":2,"name":"小米路由器3G折腾之刷OpenWrt记录","item":"https://blog.starry-s.moe/posts/2019/xiaomi_r3g_openwrt/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"小米路由器3G折腾之刷OpenWrt记录","name":"小米路由器3G折腾之刷OpenWrt记录","description":"生命不息, 折腾不止\u0026hellip;\n","keywords":["教程","路由器","OpenWrt"],"articleBody":"生命不息, 折腾不止…\n本篇由于创作时间过于久远，部分下载链接可能失效，因长期未更新，教程仅供参考。\n准备工作 你至少需要以下工具：\n路由器本体 网线 一个已格式化为FAT/FAT32格式的U盘, 用来刷开发者固件和ssh激活工具 一根怼Reset钮的针 Windows用户需要一个SSH软件（例如：putty） 小米路由器客户端, 用来绑定你的小米账号 SSH到路由器 路由器重启后指示灯会变为蓝色, 若变为红色则为刷机失败。\n安装开发者固件并开启SSH权限：\n在MiWiFi下载页面下载所需要的路由器开发者固件（ROM -\u003e ROM for R3G开发版）,命名为miwifi.bin。\n路由器断电, 将下载好的开发者固件放入U盘插入路由器USB接口, 捅住reset扭接上电源后待指示灯为黄色闪烁时松开, 数分钟后路由器会自动重启, 此过程不要乱动路由器。\n小米路由器客户端登陆小米账号绑定路由器设备, 此过程需要路由器联网。\nMiWiFi开放平台登陆小米账号下载ssh激活工具命名为miwifi_ssh.bin, 记下root密码。\n操作方式同第二步骤, 刷入ssh激活工具。\nSSH到路由器:\nWindows系统用putty, ip为191.168.31.1, 用户名：root, 密码为下载激活ssh工具时记下的密码。\nUnix/Linux系统终端执行：ssh root@191.168.31.1\n如果在ssh到路由器时遇到no matching key exchange method found错误，编辑~/.ssh/config, 加入下面两行：\nHost * KexAlgorithms +diffie-hellman-group1-sha1 刷入Bootloader（推荐/可选） 该步骤可选是因为Breed不支持直接刷入Openwrt固件, 可参考这篇帖子, 不过为了防止变砖, 还是推荐刷Breed。\nBreed原作者为hackpascal, 此处为下载地址, 文件名为breed-mt7621-xiaomi-r3g.bin\n第一种方法是ssh到路由器后通过wget下载breed文件再刷入（需要确保路由器联网）, 下载地址为https所以需要加上--no-check-certificate参数。\ncd /tmp wget --no-check-certificate https://breed.hackpascal.net/breed-mt7621-xiaomi-r3g.bin -O breed.bin mtd -r write breed.bin Bootloader 另一种方法是将breed通过U盘拷贝到路由器再刷入。\nmkdir /tmp/sdcard mount /dev/sda1 /tmp/sdcard mtd -r write /tmp/sdcard/breed.bin Bootloader 路由器刷写完毕后会自动重启, 在写入Breed的过程中不要动路由器。\n刷机 下载所需固件：\ntuna镜像站的OpenWrt下载地址：https://mirrors.tuna.tsinghua.edu.cn/lede/releases/\n官方下载地址: https://downloads.openwrt.org/releases/\n使用Breed的刷机方法 按照hackpascal的说法是：\n如果kernel0存在kernel1不存在, 那么启动kernel0 如果kernel1存在kernel0不存在, 那么启动kernel1 如果kernel0和kernel1都存在, 那么检查环境变量 xiaomi.r3g.bootfw 的值, 如果存在且值为 2, 那么启动kernel1, 否则启动kernel0\n简单来说就是：路由器有两个内核, 需要在Breed里设置环境变量让路由器启动kernel1。\n刷入Openwrt固件到Kernel1 mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1 mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0 路由器断电, 捅住reset按钮后通电, 待指示灯变为蓝色闪烁后用网线连接路由器到电脑, 浏览器打开网址192.168.1.1, 进入Breed界面。\n在环境变量编辑里添加xiaomi.r3g.bootfw字段, 值为2,保存后重启即可进入Openwrt。\n没有刷入Breed的刷机方法 OpenWrt官网提供的教程是在没有刷入Breed的情况下刷入OpenWrt固件的。\nssh到路由器, 导入固件后刷机。\nmtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1 mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0 nvram set flag_try_sys1_failed=1 nvram commit reboot Others 如果刷了Breed + Pandavan/PandoraBox后想换回OpenWrt的话, 首先在Breed中刷回小米路由器开发版的官方固件, 然后SSH到路由器按照上述的使用Breed的刷机方法再刷机。\nUSB3.0会对路由器的2.4G频段信号造成干扰。\nOpenWrt默认语言为英文, 可安装luci-i18n-base-zh-cn,luci-i18n-base-zh-tw安装简体/繁体中文。\nOpenWrt-dist可拓展更多功能。\n为优化软件包安装速度, 可将opkg源改为国内：\nLuCI -\u003e System -\u003e Software -\u003e Configuration 中将 Distribution feeds 的http://downloads.openwrt.org替换为http://mirrors.tuna.tsinghua.edu.cn/lede。\nOpenWrt可安装软件包libustream-openssl libustream-mbedtls解决wget无法访问https服务器问题。 然后建议把opkg源能改为https的都改为https。\n","wordCount":"1852","inLanguage":"zh","image":"https://blog.starry-s.moe/avatar.png","datePublished":"2019-02-19T00:49:20+08:00","dateModified":"2021-01-23T12:36:44+08:00","author":{"@type":"Person","name":"STARRY-S"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.starry-s.moe/posts/2019/xiaomi_r3g_openwrt/"},"publisher":{"@type":"Organization","name":"STARRY-S' Blog","logo":{"@type":"ImageObject","url":"https://blog.starry-s.moe/favicon-32x32.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.starry-s.moe/ accesskey=h title="Blog (Alt + H)"><img src=https://blog.starry-s.moe/apple-touch-icon.png alt aria-label=logo height=24>Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.starry-s.moe/gallery/ title=相册><span>相册</span></a></li><li><a href=https://blog.starry-s.moe/archives/ title=归档><span>归档</span></a></li><li><a href=https://blog.starry-s.moe/tags/ title=标签><span>标签</span></a></li><li><a href=https://blog.starry-s.moe/categories/ title=分类><span>分类</span></a></li><li><a href=https://blog.starry-s.moe/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://blog.starry-s.moe/projects/ title=项目><span>项目</span></a></li><li><a href=https://blog.starry-s.moe/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.starry-s.moe/>主页</a>&nbsp;»&nbsp;<a href=https://blog.starry-s.moe/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">小米路由器3G折腾之刷OpenWrt记录</h1><div class=post-meta><span title='2019-02-19 00:49:20 +0800 +0800'>2019-02-19 00:49:20 +0800</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;1852 字&nbsp;·&nbsp;STARRY-S&nbsp;|&nbsp;<a href=https://github.com/STARRY-S/blog/edit/main/content/posts/2019/xiaomi_r3g_openwrt/index.md rel="noopener noreferrer" target=_blank>Edit Text</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#准备工作>准备工作</a></li><li><a href=#ssh到路由器>SSH到路由器</a></li><li><a href=#刷入bootloader推荐可选>刷入Bootloader（推荐/可选）</a></li><li><a href=#刷机>刷机</a><ul><li><a href=#使用breed的刷机方法>使用Breed的刷机方法</a></li><li><a href=#没有刷入breed的刷机方法>没有刷入Breed的刷机方法</a></li></ul></li><li><a href=#others>Others</a></li></ul></nav></div></details></div><div class=post-content><p>生命不息, 折腾不止&mldr;</p><hr><meting-js server=netease type=song id=22802176 theme=#233333></meting-js><blockquote><p>本篇由于创作时间过于久远，部分下载链接可能失效，因长期未更新，教程仅供参考。</p></blockquote><h2 id=准备工作>准备工作<a hidden class=anchor aria-hidden=true href=#准备工作>#</a></h2><p>你至少需要以下工具：</p><ul><li>路由器本体</li><li>网线</li><li>一个已格式化为FAT/FAT32格式的U盘, 用来刷开发者固件和ssh激活工具</li><li>一根怼<code>Reset</code>钮的针</li><li>Windows用户需要一个SSH软件（例如：<a href=https://putty.org>putty</a>）</li><li><a href=http://www1.miwifi.com/miwifi_download.html>小米路由器客户端</a>, 用来绑定你的小米账号</li></ul><h2 id=ssh到路由器>SSH到路由器<a hidden class=anchor aria-hidden=true href=#ssh到路由器>#</a></h2><blockquote><p>路由器重启后指示灯会变为蓝色, 若变为红色则为刷机失败。</p></blockquote><p>安装开发者固件并开启SSH权限：</p><ol><li><p>在<a href=http://www1.miwifi.com/miwifi_download.html>MiWiFi下载页面</a>下载所需要的路由器开发者固件（ROM -> ROM for R3G开发版）,命名为<code>miwifi.bin</code>。</p></li><li><p>路由器断电, 将下载好的开发者固件放入U盘插入路由器USB接口, 捅住reset扭接上电源后待指示灯为黄色闪烁时松开, 数分钟后路由器会自动重启, 此过程不要乱动路由器。</p></li><li><p>小米路由器客户端登陆小米账号绑定路由器设备, 此过程需要路由器联网。</p></li><li><p><a href=http://www1.miwifi.com/miwifi_open.html>MiWiFi开放平台</a>登陆小米账号下载ssh激活工具命名为<code>miwifi_ssh.bin</code>, 记下root密码。</p></li><li><p>操作方式同第二步骤, 刷入ssh激活工具。</p></li></ol><p>SSH到路由器:</p><ul><li><p>Windows系统用putty, ip为<code>191.168.31.1</code>, 用户名：<code>root</code>, 密码为下载激活ssh工具时记下的密码。</p></li><li><p>Unix/Linux系统终端执行：<code>ssh root@191.168.31.1</code></p><p>如果在ssh到路由器时遇到no matching key exchange method found错误，编辑<code>~/.ssh/config</code>, 加入下面两行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Host *
</span></span><span class=line><span class=cl>    KexAlgorithms +diffie-hellman-group1-sha1
</span></span></code></pre></div></li></ul><h2 id=刷入bootloader推荐可选>刷入Bootloader（推荐/可选）<a hidden class=anchor aria-hidden=true href=#刷入bootloader推荐可选>#</a></h2><blockquote><p>该步骤可选是因为Breed不支持直接刷入Openwrt固件, 可参考<a href="https://www.right.com.cn/forum/forum.php?mod=viewthread&amp;tid=267455">这篇帖子</a>, 不过为了防止变砖, 还是推荐刷Breed。</p></blockquote><p>Breed原作者为hackpascal, <a href=https://breed.hackpascal.net/>此处为下载地址</a>, 文件名为<code>breed-mt7621-xiaomi-r3g.bin</code></p><p>第一种方法是ssh到路由器后通过<code>wget</code>下载breed文件再刷入（需要确保路由器联网）, 下载地址为https所以需要加上<code>--no-check-certificate</code>参数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>cd</span> <span class=o>/</span><span class=n>tmp</span>
</span></span><span class=line><span class=cl><span class=n>wget</span> <span class=o>--</span><span class=n>no</span><span class=o>-</span><span class=n>check</span><span class=o>-</span><span class=n>certificate</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>breed</span><span class=o>.</span><span class=n>hackpascal</span><span class=o>.</span><span class=n>net</span><span class=o>/</span><span class=n>breed</span><span class=o>-</span><span class=n>mt7621</span><span class=o>-</span><span class=n>xiaomi</span><span class=o>-</span><span class=n>r3g</span><span class=o>.</span><span class=n>bin</span> <span class=o>-</span><span class=n>O</span> <span class=n>breed</span><span class=o>.</span><span class=n>bin</span>
</span></span><span class=line><span class=cl><span class=n>mtd</span> <span class=o>-</span><span class=n>r</span> <span class=n>write</span> <span class=n>breed</span><span class=o>.</span><span class=n>bin</span> <span class=n>Bootloader</span>
</span></span></code></pre></div><p>另一种方法是将breed通过U盘拷贝到路由器再刷入。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>mkdir</span> <span class=o>/</span><span class=n>tmp</span><span class=o>/</span><span class=n>sdcard</span>
</span></span><span class=line><span class=cl><span class=n>mount</span> <span class=o>/</span><span class=n>dev</span><span class=o>/</span><span class=n>sda1</span> <span class=o>/</span><span class=n>tmp</span><span class=o>/</span><span class=n>sdcard</span>
</span></span><span class=line><span class=cl><span class=n>mtd</span> <span class=o>-</span><span class=n>r</span> <span class=n>write</span> <span class=o>/</span><span class=n>tmp</span><span class=o>/</span><span class=n>sdcard</span><span class=o>/</span><span class=n>breed</span><span class=o>.</span><span class=n>bin</span> <span class=n>Bootloader</span>
</span></span></code></pre></div><p>路由器刷写完毕后会自动重启, <strong>在写入Breed的过程中不要动路由器</strong>。</p><h2 id=刷机>刷机<a hidden class=anchor aria-hidden=true href=#刷机>#</a></h2><p>下载所需固件：</p><ul><li><p>tuna镜像站的OpenWrt下载地址：<a href=https://mirrors.tuna.tsinghua.edu.cn/lede/releases/>https://mirrors.tuna.tsinghua.edu.cn/lede/releases/</a></p></li><li><p>官方下载地址: <a href=https://downloads.openwrt.org/releases/>https://downloads.openwrt.org/releases/</a></p></li></ul><h3 id=使用breed的刷机方法>使用Breed的刷机方法<a hidden class=anchor aria-hidden=true href=#使用breed的刷机方法>#</a></h3><p>按照hackpascal的说法是：</p><blockquote><p>如果kernel0存在kernel1不存在, 那么启动kernel0
如果kernel1存在kernel0不存在, 那么启动kernel1
如果kernel0和kernel1都存在, 那么检查环境变量 <code>xiaomi.r3g.bootfw</code> 的值, 如果存在且值为 2, 那么启动kernel1, 否则启动kernel0</p></blockquote><p>简单来说就是：路由器有两个内核, 需要在Breed里设置环境变量让路由器启动kernel1。</p><ol><li>刷入Openwrt固件到Kernel1</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1
</span></span><span class=line><span class=cl>mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0
</span></span></code></pre></div><ol start=2><li><p>路由器断电, 捅住reset按钮后通电, 待指示灯变为蓝色闪烁后用网线连接路由器到电脑, 浏览器打开网址<code>192.168.1.1</code>, 进入Breed界面。</p></li><li><p>在环境变量编辑里添加<code>xiaomi.r3g.bootfw</code>字段, 值为<code>2</code>,保存后重启即可进入Openwrt。</p></li></ol><h3 id=没有刷入breed的刷机方法>没有刷入Breed的刷机方法<a hidden class=anchor aria-hidden=true href=#没有刷入breed的刷机方法>#</a></h3><blockquote><p><a href=https://openwrt.org/toh/xiaomi/mir3g>OpenWrt官网提供的教程</a>是在没有刷入Breed的情况下刷入OpenWrt固件的。</p></blockquote><p>ssh到路由器, 导入固件后刷机。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1
</span></span><span class=line><span class=cl>mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0
</span></span><span class=line><span class=cl>nvram set flag_try_sys1_failed=1
</span></span><span class=line><span class=cl>nvram commit
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>reboot
</span></span></code></pre></div><hr><h2 id=others>Others<a hidden class=anchor aria-hidden=true href=#others>#</a></h2><ol><li><p>如果刷了Breed + Pandavan/PandoraBox后想换回OpenWrt的话, 首先在Breed中刷回小米路由器开发版的官方固件, 然后SSH到路由器按照上述的使用Breed的刷机方法再刷机。</p></li><li><p>USB3.0会对路由器的2.4G频段信号造成干扰。</p></li><li><p>OpenWrt默认语言为英文, 可安装<code>luci-i18n-base-zh-cn</code>,<code>luci-i18n-base-zh-tw</code>安装简体/繁体中文。</p></li><li><p><a href=http://openwrt-dist.sourceforge.net>OpenWrt-dist</a>可拓展更多功能。</p></li><li><p>为优化软件包安装速度, 可将opkg源改为国内：</p></li></ol><p>LuCI -> System -> Software -> Configuration 中将 Distribution feeds 的<code>http://downloads.openwrt.org</code>替换为<code>http://mirrors.tuna.tsinghua.edu.cn/lede</code>。</p><ol start=6><li>OpenWrt可安装软件包<code>libustream-openssl</code> <code>libustream-mbedtls</code>解决<code>wget</code>无法访问https服务器问题。</li></ol><p>然后建议把opkg源能改为https的都改为https。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.starry-s.moe/tags/%E6%95%99%E7%A8%8B/>教程</a></li><li><a href=https://blog.starry-s.moe/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/>路由器</a></li><li><a href=https://blog.starry-s.moe/tags/openwrt/>OpenWrt</a></li></ul><nav class=paginav><a class=prev href=https://blog.starry-s.moe/posts/2019/shanghai/><span class=title>« 上一页</span><br><span>一个人的旅行 —— 上海</span>
</a><a class=next href=https://blog.starry-s.moe/posts/2019/nier-automata/><span class=title>下一页 »</span><br><span>Automata</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//starry-s-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>© 2016 - 2025 STARRY-S | <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> | Hosted on <a href=https://pages.github.com>GitHub Pages</a><br></span>·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>const pathname=window.location.pathname,images=document.querySelectorAll("img");Array.from(images).forEach(e=>{if(!pathname.includes("/posts/"))return;if(e.src.indexOf("images")<0)return;e.addEventListener("load",()=>fitImage(e)),e.complete&&e.naturalWidth!==0&&fitImage(e)});function fitImage(e){e.style.marginLeft="auto",e.style.marginRight="auto",e.naturalWidth/e.naturalHeight<1.1&&(e.style.maxWidth="60%",e.style.height="auto")}</script><script src=/js/home-info.js></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>